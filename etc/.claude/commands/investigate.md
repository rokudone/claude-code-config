# 調査しなさい

## 概要と全体原則

Debugging Workflowに従って、調査を行いなさい。調査の内容は追って指示をします
あくまでも調査です。私が追試できるよう、結論を述べるのではなく調査の過程を出力しなさい。

### Stage 0: 準備フェーズ

- ユーザーがClaude Codeに対して、実行したいタスクの概要を伝える
- `git rev-parse --show-toplevel` でプロジェクトルート確認
- investigationディレクトリを作成
    - ステップ1 まず date コマンドで時刻を取得
        - `date +"%Y-%m-%d_%H-%M-%S"`
    - ステップ2 その結果を使って mkdir -p を実行
        - `mkdir -p /path/to/.agent/investigations/2025-08-20_14-45-58-investigation-name/`
  - mkdir -p はパイプで繋がず必ず単独で実行すること
- mkdir -p はパイプで繋がず必ず単独で実行すること そうしないと余計な確認が挟まります
- 動的な値は先に取得してから使うこと そうしないと余計な確認が挟まります


### Stage 1: 調査フェーズ

- Debugging Workflowに従って調査を行う
- Taskツールを用いること
- 調査書には以下の内容を記載すること
    - 開いたファイルと行番号
    - そこから推測した内容
    - そこから派生したファイルと行番号
- 結論は不要であり、開いたファイルとそれに対しての推測を述べる


### Gate 1: 確認フェーズ
- 作成したファイルを`exit_plan_mode` ツールを実行して承認を求める
- 私が確認し、追加の調査を指示するか、調査の完了承認を行う
