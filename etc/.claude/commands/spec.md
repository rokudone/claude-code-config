# spec-driven development

Claude Codeを用いたspec-driven developmentを行います。

## spec-driven development とは

spec-driven development は、以下の5つのフェーズからなる開発手法です。

### 1. 事前準備フェーズ

- ユーザーがClaude Codeに対して、実行したいタスクの概要を伝える
- このフェーズで !`mkdir -p ./.agent/specs`  を実行します
- `./.agent/specs` 内にタスクの概要から適切な spec 名を考えて、その名前のディレクトリを作成します
    - たとえば、「記事コンポーネントを作成する」というタスクなら `./.agent/specs/create-article-component` という名前のディレクトリを作成します
- 以下ファイルを作成するときはこのディレクトリの中に作成します

### 2. 要件フェーズ (EARS表記法によるユーザストーリー)

- Claude Codeがユーザーから伝えられたタスクの概要に基づいて、タスクが満たすべき「要件ファイル」を作成する
- Claude Codeがユーザーに対して「要件ファイル」を提示し、問題がないかを尋ねる
- ユーザーが「要件ファイル」を確認し、問題があればClaude Codeに対してフィードバックする
- ユーザーが「要件ファイル」を確認し、問題がないと答えるまで「要件ファイル」に対して修正を繰り返す

#### 要件ファイルの例
```
# 要件定義書

## 概要

この機能は、プロジェクトテンプレートシステムを強化し、より良いテンプレート管理、テンプレート編集のUI改善、の修正を提供します。目標はテンプレートを使用する際のユーザーエクスペリエンスを向上させることです。

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、新しいプロジェクトテンプレートを準備・編集したい。これにより、異なるタイプのプロジェクトの初期構造とタスクをカスタマイズできる。

#### 受け入れ基準

1. テンプレート管理インターフェースにアクセスしたとき、システムは新しいテンプレートを作成するオプションを提供する
2. 新しいテンプレートを作成するとき、システムは初期タスク、プロジェクト構造、設定を定義できるようにする
3. 既存のテンプレートを編集するとき、システムはテンプレートの既存構造を保持しながら変更を許可する
4. テンプレートの変更を保存するとき、システムは変更を永続化し、新しいプロジェクト作成で利用可能にする

### 要件2
以下略
```

### 3. 設計フェーズ

- Claude Codeは、「要件ファイル」に記載されている要件を満たすような設計を記述した「設計ファイル」を作成する
- Claude Codeがユーザーに対して「設計ファイル」を提示し、問題がないかを尋ねる
- ユーザーが「設計ファイル」を確認し、問題があればClaude Codeに対してフィードバックする
- ユーザーが「設計ファイル」を確認し、問題がないと答えるまで「要件ファイル」に対して修正を繰り返す

#### 設計ファイルの例

````
# 設計書

## 概要
プロジェクトテンプレートシステムの強化により、テンプレート管理の改善を実現します。

## アーキテクチャ

### 改善後のアーキテクチャ
```
UI Layer
├── ProjectTemplateManager.tsx (専用ポップアップ)
├── TemplateEditModal.tsx (新規作成)
└── TaskColumn.tsx (横スクロール対応)
```

## 主要コンポーネント

### 1. ProjectTemplateManager.tsx
```typescript
interface ProjectTemplateManagerProps {
  onApplyTemplate: (projectName: string, templateId: string) => void;
  isOpen: boolean;
  onClose: () => void;
}
```
- 左パネル: テンプレート一覧
- 右パネル: プロジェクト作成フォームのみ
- 編集機能: 専用ポップアップモーダルで実行


## 移行戦略

### 実装優先度
**High**
1. TemplateEditModal の作成

**Medium**
1. 初期タスクの横スクロール
````

### 4. 実装計画フェーズ

- Claude Codeは、「設計ファイル」に記載されている設計を実装するための「実装計画ファイル」を作成する
- Claude Codeがユーザーに対して「実装計画ファイル」を提示し、問題がないかを尋ねる
- ユーザーが「実装計画ファイル」を確認し、問題があればClaude Codeに対してフィードバックする
- ユーザーが「実装計画ファイル」を確認し、問題がないと答えるまで「要件ファイル」に対して修正を繰り返す

実装計画ファイル例
```
# 実装計画

- [ ] 1. TemplateEditModal コンポーネントの作成
  - 専用のテンプレート編集ポップアップモーダルを実装
  - 新規作成モードと編集モードの両方をサポート
  - 初期タスクの横スクロールレイアウトを実装
  - _要件: 2.1, 2.2, 3.1, 3.2_

- [ ] 2. ProjectTemplateManager の編集機能分離
  - 右パネルから編集フォームを削除
  - 編集ボタンクリック時に TemplateEditModal を開く処理を追加
  - プロジェクト作成フォームのみを右パネルに残す
  - _要件: 2.1, 2.3_
```

### 5. 実装フェーズ

- Claude Codeは「実装計画ファイル」に基づいて実装を開始する
- Claude Codeは「要件ファイル」「設計ファイル」に記載されている内容を守りながら実装する
